{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst API_KEY = '54674078-cc29e36c5df6708fa2caeef42';\n\nexport async function getImagesByQuery(query, page, per_page) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: per_page, \n  };\n  try {\n    const response = await axios({\n      method: 'get',\n      url: 'https://pixabay.com/api/',\n      params,\n    });\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    throw error;\n  }\n}\n","import SimpleLightboxModule from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst SimpleLightbox = SimpleLightboxModule.default || SimpleLightboxModule;\nlet lightbox;\n\nexport function createGallery(images) {\n  const galleryContainer = document.querySelector('.gallery');\n  const galleryMarkup = images\n    .map(\n      image =>\n        `<li class=\"photo-card\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags.split(',').slice(0, 3).join(', ')}\"/>\n            </a>\n            <div class=\"info\">\n            <div class=\"info-item\">\n                <p class=\"info-item\">\n                    <b>Likes</b>${image.likes}\n                </p>\n                </div>\n                <div class=\"info-item\">\n                <p class=\"info-item\">\n                    <b>Views</b>${image.views}\n                </p>\n                </div>\n                <div class=\"info-item\">\n                <p class=\"info-item\">\n                    <b>Comments</b>${image.comments}\n                </p>\n                </div>\n                <div class=\"info-item\">\n                <p class=\"info-item\">\n                    <b>Downloads</b>${image.downloads}\n                </p>\n                </div>\n            </div>\n        </li>`\n    )\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', galleryMarkup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n      closeText: '×',\n      navText: ['←', '→'],\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  const galleryContainer = document.querySelector('.gallery');\n  galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n  const loaderContainer = document.querySelector('.loader');\n  loaderContainer.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  const loaderContainer = document.querySelector('.loader');\n  loaderContainer.classList.add('hidden');\n}\n\nexport function showLoadMoreBtn() {\n  const loadMoreBtn = document.querySelector('.load-more');\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreBtn() {\n  const loadMoreBtn = document.querySelector('.load-more');\n  loadMoreBtn.classList.add('hidden');\n}\n\nexport function showImgTotal(images, imagesCount) {\n  const jsImgTotal = document.querySelector('.img-total');\n  imagesCount += images.hits.length;\n  jsImgTotal.textContent = `Total images: ${imagesCount}/${images.totalHits}`;\n  if (images.totalHits === imagesCount) {\n    hideLoadMoreBtn();\n    iziToast.info({\n      title: 'Info',\n      position: 'topRight',\n      message: 'Sorry, it is all images we have',\n    });\n  } else {\n    showLoadMoreBtn();\n  }\n  return imagesCount;\n}","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showImgTotal,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n} from './js/render-functions.js';\nimport './css/styles.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst jsSearchQuery = document.querySelector('.js-search-query');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst jsImgTotal = document.querySelector('.img-total');\n\nlet query = '';\nlet page = 1;\nlet imagesInPage = 15;\nlet imagesCount = 0;\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault(); \n\n  clearGallery();\n  showLoader();\n  hideLoadMoreBtn();\n\n  query = e.currentTarget.searchText.value.trim();\n  imagesCount = 0;\n  page = 1; \n\n  form.reset(); \n\n  if (query === '') {\n    iziToast.warning({\n      title: 'warning',\n      position: 'topRight',\n      message: 'Please enter a search query!',\n    });\n    jsImgTotal.textContent = ``;\n    jsSearchQuery.textContent = `Search query :`;\n    clearGallery();\n    hideLoadMoreBtn(); \n    hideLoader(); \n    return;\n  }\n\n  jsSearchQuery.textContent = `Search query : \"${query}\"`;\n\n  try {\n    const images = await getImagesByQuery(query, page, imagesInPage);\n\n    if (images.hits.length === 0) {\n      iziToast.info({\n        title: 'Info',\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      hideLoadMoreBtn(); \n    } else {\n\n      createGallery(images.hits);\n      imagesCount = showImgTotal(images, imagesCount);\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message: 'Sorry, something went wrong. Please try again!',\n    });\n  } finally {\n    hideLoader();\n    page += 1;\n  }\n}\n\nasync function onLoadMoreClick() {\n  showLoader();\n  try {\n    const images = await getImagesByQuery(query, page, imagesInPage);\n    createGallery(images.hits);\n    imagesCount = showImgTotal(images, imagesCount);\n    page += 1;\n    const firstCard = document.querySelector('.gallery').firstElementChild;\n    if (firstCard) {\n      const { height } = firstCard.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\n\n"],"names":["API_KEY","getImagesByQuery","query","page","per_page","params","axios","error","iziToast","SimpleLightbox","SimpleLightboxModule","lightbox","createGallery","images","galleryContainer","galleryMarkup","image","clearGallery","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","showImgTotal","imagesCount","jsImgTotal","form","jsSearchQuery","loadMoreBtn","imagesInPage","onFormSubmit","onLoadMoreClick","firstCard","height"],"mappings":"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"}